{% extends "layout.html" %}
    {% block content %}
    <!DOCTYPE html>
    <html>
    <head>
        <title>Quiz App</title>
    </head>
    <body>
        <div class="content-section" id="classinfo">
        <h1>{{ quiz.title }}</h1>
        <p>Timer: <span id="timer">{{ quiz.timer }}</span> seconds</p>
        <p>Question {{ session['current_question'] + 1 }} of {{ quiz.questions|length }}</p>
        <p>{{ question.text }}</p>
        <form method="POST" id="quiz-form">
            <input type="radio" name="answer" value="{{ options.option1 }}" required> {{ options.option1 }}<br>
            <input type="radio" name="answer" value="{{ options.option2 }}"> {{ options.option2 }}<br>
            <input type="radio" name="answer" value="{{ options.option3 }}"> {{ options.option3 }}<br>
            <input type="radio" name="answer" value="{{ options.option4 }}"> {{ options.option4 }}<br>
            <input type="submit" value="Submit">
        </form>
    </div>
        {% block javascript %}
        <script>
            // Countdown timer
            let timeLeft = JSON.parse('{{ timer }}');
            const timerElement = document.getElementById("timer");
            const quizForm = document.getElementById("quiz-form");

            function updateTimer() {
                timerElement.textContent = timeLeft;
                if (timeLeft <= 0) {
                    // Time's up, automatically submit the form
                    quizForm.submit();
                } else {
                    // Decrement the timer and update every second
                    timeLeft--;
                    setTimeout(updateTimer, 1000);
                }
            }

            // Start the timer when the page loads
            updateTimer();
        </script>
    </body>
    </html>
    {% endblock %}
    {% endblock content %}